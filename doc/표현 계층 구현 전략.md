## 표현 계층 구현 전략

표현 계층(Controller, View)에서는 주로 REST API를 호출하는 경우 클라이언트로부터 들어오는 파라미터를 검증하는 역할을 한다고 생각합니다.  물론 요청하기전에 프론트에서도 검증을 하겠지만, 응용 계층에서 컨트롤러에서 전달받은 파라미터로 비즈니스 로직이 정상적으로 동작하기 위해서는 항상 올바른 값을 받을 수 있도록 해야 합니다. 

### 검증 전략

저는 클라이언트로부터 요청 받은 데이터를 검증하기 위해서는 별도로 Controller에서 메서드를 생성해도 괜찮지만 재사용성을 위해서 javax.validation 패키지에서 제공해주는 검증 어노테이션을 사용하였습니다.

```kotlin
data class BoardDto(

    @field:NotBlank
    var author: String,

    @field:NotBlank
    var title: String,

    @field:NotBlank
    @field:Size(min = 2, max = 1000, message = "본문은 2~30자 이내여야 합니다.")
    var content: String,

    ) {
    fun toEntity(): Board {
        return Board.of(author, title, content)
    }

    class UpdateForm(
        @field:NotBlank
        val title: String,
        @field:NotBlank
        @field:Size(min = 2, max = 1000, message = "본문은 2~30자 이내여야 합니다.")
        val content: String
    )

    class Res(val id: Long?, val author: String, val title: String, val content: String, val createdAt: String?, val updatedAt: String?) {
        var replies: MutableList<ReplyDto> = mutableListOf()

        fun addReplies(replies: MutableList<ReplyDto>) {
            this.replies = replies
        }
    }
}
```
도메인은 영속화되어야 하기 때문에 표현계층에서 클라이언트의 파라미터와 매핑할 경우 DTO를 사용하는게 API 스펙 변경에도 유연하게 대처할 수 있다고 생각하여 BoardDto라는 클래스를 생성하였습니다.

코틀린에서는 field에 검증 어노테이션을 적용할 경우 `@field:~`와 같이 필드에 적용을 해줘야 합니다.

요청하는 Http 메서드(get, post, put, delete등)에 따라서 검증이 실패할 경우 Global로 Exception을 관리하는 ControllerAdvice 객체에서 예외에 대한 메시지를 내려 주도록 하였습니다.
